# Plan de Migraci√≥n de Media Queries a Mixins de Breakpoints

## üìä An√°lisis Inicial

### Breakpoints Disponibles

```less
@bp-xs: 0em; // 0px (mobile first)
@bp-sm: 30em; // 480px (m√≥vil grande)
@bp-md: 48em; // 768px (tablet)
@bp-lg: 64em; // 1024px (desktop)
@bp-xl: 80em; // 1280px (desktop grande)
@bp-2xl: 96em; // 1536px (desktop extra grande)
```

### Mixins Disponibles

```less
.mq-up(@bp)          // min-width (mobile-first)
.mq-down(@bp)        // max-width (desktop-first)
.mq-between(@min, @max) // rango espec√≠fico
.mq-only(@bp)        // un solo breakpoint;
```

## üéØ Lotes de Migraci√≥n

### ‚ö†Ô∏è BLOQUEADOR: Mixins de Breakpoints Requieren Correcci√≥n

**PROBLEMA IDENTIFICADO:**
Los mixins `.mq-up()`, `.mq-down()`, `.mq-between()` en `src/styles/tools/_breakpoints.less` tienen el bloque de contenido comentado:

```less
.mq-up(@bp) {
  @media (min-width: @bp) {
    // & {
    //   .-();
    // }
  }
}
```

Esto hace que los mixins NO generen c√≥digo CSS, dejando las media queries vac√≠as.

**SOLUCI√ìN NECESARIA:**

1. Descomentar el bloque `& { .-(); }` en los mixins
2. O redise√±ar los mixins para no usar el patr√≥n detached ruleset
3. Probar que funcionen correctamente

**ESTADO ACTUAL:**

- ‚ùå Migraci√≥n del Lote 1 **REVERTIDA** (header.less y footer.less vuelven a @media)
- ‚è≥ Esperando correcci√≥n de mixins antes de continuar

---

### Lote 1: Layouts Principales ‚è≥ PENDIENTE (Bloqueado)

**Archivos:**

- ‚úÖ `src/styles/components/_header.less` - 3 media queries migradas
- ‚úÖ `src/styles/components/_footer.less` - 1 media query migrada

**Total Lote 1:** 4 media queries migradas (excluidas 2 base `@media (min-width: 0em)`)

**Mapeo Aplicado:**
| Archivo | Media Query Original | Migrado a | Notas |
|---------|---------------------|-----------|-------|
| header.less | `@media (min-width: 48em)` | `.mq-up(@bp-md)` | Tablet 768px |
| header.less | `@media (min-width: 64em)` | `.mq-up(@bp-lg)` | Desktop 1024px |
| header.less | `@media (min-width: 81.25em)` | `.mq-up(81.25em)` | Custom 1300px |
| footer.less | `@media (min-width: 64em)` | `.mq-up(@bp-lg)` | Desktop 1024px |

**Cambios realizados:**

- ‚úÖ Sustituidas 4 media queries por mixins
- ‚úÖ Mantenida estructura y especificidad
- ‚úÖ No cambios en valores o propiedades
- ‚úÖ Solo modificado envoltorio de media query

**Pr√≥xima verificaci√≥n:**

- [ ] Probar en 360px (mobile)
- [ ] Probar en 1024px (desktop)
- [ ] Probar en 1440px (large desktop)
- [ ] Ejecutar `npm run lint:css`

---

### Lote 2: Componentes Base ‚è≥ PENDIENTE

**Archivos pendientes:**

- `src/styles/components/_cs-base.less`
- `src/styles/layouts/news-post-layout.less`
- `src/styles/layouts/bando-post-layout.less`
- `src/styles/layouts/news-recent-articles.less`
- `src/styles/layouts/news-recent-articles-with-sidebar.less`
- `src/styles/layouts/bandos-recent-articles-with-sidebar.less`

### Lote 3: P√°ginas Principales

**Archivos pendientes:**

- `src/styles/pages/index.less`
- `src/styles/layouts/news-post-layout.less` (detalle noticia)

### Lote 4: Resto de P√°ginas

**Archivos pendientes:**

- `src/styles/pages/contacto.less`
- `src/styles/pages/testimonios.less`
- `src/styles/pages/sobre-el-pueblo.less`
- `src/styles/pages/proyectos.less`
- Otros componentes

## üìù Reglas de Migraci√≥n

### 1. Patr√≥n de Reemplazo

**ANTES:**

```less
@media only screen and (min-width: 64em) {
  .header {
    display: flex;
  }
}
```

**DESPU√âS:**

```less
.mq-up(@bp-lg) {
  .header {
    display: flex;
  }
}
```

### 2. Breakpoints Especiales

**Mobile-first (min-width: 0em):**

- ‚ùå NO usar mixin
- ‚úÖ Estilos base fuera de media query

**Breakpoints custom:**

- Si es cercano a un token, usar el token
- Si es muy espec√≠fico, usar valor literal en el mixin
- Ejemplo: `81.25em` (1300px) ‚Üí `.mq-up(81.25em)`

### 3. Preservar Estructura

- ‚úÖ Mantener jerarqu√≠a de selectores
- ‚úÖ Mantener orden de propiedades
- ‚úÖ No cambiar valores
- ‚úÖ Solo cambiar envoltorio de media query

## üîç Checklist de Verificaci√≥n

### Por Cada Archivo

- [ ] Identificar todas las media queries
- [ ] Mapear a breakpoints tokens
- [ ] Aplicar mixin correspondiente
- [ ] Verificar que no cambie la especificidad
- [ ] Verificar que no aumente el nesting (max 3 niveles)

### Por Cada Lote

- [ ] Comparar CSS compilado antes/despu√©s
- [ ] Probar en 3 anchos: 360px, 1024px, 1440px
- [ ] Ejecutar `npm run lint:css`
- [ ] Documentar cambios en commit

## üìà M√©tricas

### Lote 1 - Header & Footer

**Antes:**

- Media queries con valores hard-coded: 6
- Media queries con variables: 0

**Despu√©s:**

- Media queries con mixins: 4 (excluyendo base @media 0em)
- Media queries eliminadas (base): 2

**Beneficios:**

- ‚úÖ Tokens centralizados
- ‚úÖ Sintaxis consistente
- ‚úÖ M√°s mantenible
- ‚úÖ Mejor legibilidad

## üöÄ Siguientes Pasos

1. ‚úÖ Migrar Lote 1 (header.less, footer.less)
2. ‚è≥ Verificar visualmente
3. ‚è≥ Migrar Lote 2 (componentes base)
4. ‚è≥ Migrar Lote 3 (p√°ginas principales)
5. ‚è≥ Migrar Lote 4 (resto)
6. ‚è≥ Actualizar README con gu√≠a de uso
7. ‚è≥ Eliminar media queries legacy restantes

---

**Fecha inicio:** 31 de octubre de 2025
**Estado:** En progreso - Lote 1
