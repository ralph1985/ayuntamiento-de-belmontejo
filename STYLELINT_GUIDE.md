# Gu√≠a de Stylelint - Ayuntamiento de Belmontejo

## üìã Resumen

Este proyecto usa **Stylelint** para mantener la calidad y consistencia del c√≥digo CSS/LESS siguiendo la arquitectura ITCSS.

## üöÄ Comandos R√°pidos

```bash
# Verificar estilos (muestra warnings)
npm run lint:css

# Auto-corregir problemas de formato
npm run lint:css:fix

# Lintear todo (JS + CSS)
npm run lint && npm run lint:css
```

## ‚öôÔ∏è Configuraci√≥n Actual

### Modo "Warning" (No Bloquea PRs)

Actualmente Stylelint est√° configurado con `"defaultSeverity": "warning"`:

- ‚úÖ **No bloquea commits** ni pull requests
- ‚ö†Ô∏è **Muestra advertencias** para mejorar el c√≥digo
- üìù **Recomendado:** Ejecutar antes de cada commit
- üéØ **Objetivo:** Limpiar gradualmente el c√≥digo existente

### Reglas Principales

#### 1. **Nomenclatura BEM Ligera**

```less
// ‚úÖ BIEN
.card {
}
.card__header {
}
.card__header--large {
}
.news-article {
}
.news-article__title {
}

// ‚ùå MAL
.cardHeader {
} // camelCase
.Card {
} // PascalCase
.card_header {
} // snake_case con un solo guion bajo
```

#### 2. **M√°ximo 3 Niveles de Anidaci√≥n**

```less
// ‚úÖ BIEN (2 niveles)
.card {
  .card__header {
    .card__title {
      color: red;
    }
  }
}

// ‚ö†Ô∏è WARNING (4 niveles - demasiado profundo)
.card {
  .card__header {
    .card__title {
      .card__icon {
        // 4to nivel
        color: red;
      }
    }
  }
}

// ‚úÖ SOLUCI√ìN - Aplanar jerarqu√≠a
.card {
}
.card__header {
}
.card__title {
}
.card__icon {
  color: red;
}
```

#### 3. **Sin Nombres de Colores**

```less
// ‚ùå MAL
color: red;
background: white;

// ‚úÖ BIEN
color: #ff0000;
color: var(--color-primary);
background: #ffffff;
background: var(--color-bg-main);
```

#### 4. **Sin IDs como Selectores**

```less
// ‚ùå MAL
#header {
  color: blue;
}

// ‚úÖ BIEN
.header {
  color: var(--color-primary);
}

// ‚úÖ BIEN - IDs para anclas, pero usa clases para estilos
#hero-section {
  // OK para scroll-anchor
  // Sin estilos aqu√≠
}

.hero-section {
  // Estilos con clase
  padding: 2rem;
}
```

#### 5. **Orden de Propiedades**

```less
.component {
  // 1. Custom properties primero
  --local-color: #333;

  // 2. Variables LESS
  @local-spacing: 1rem;

  // 3. @includes
  .mixin-example();

  // 4. Propiedades
  display: block;
  color: var(--local-color);

  // 5. Media queries
  @media (min-width: 768px) {
    display: flex;
  }

  // 6. Selectores anidados
  &:hover {
    opacity: 0.8;
  }

  .nested-element {
    margin: 1rem;
  }
}
```

## üîÑ Workflow Recomendado

### Antes de Commit

```bash
# 1. Hacer cambios en archivos .less
# 2. Ejecutar linter
npm run lint:css

# 3. Si hay warnings simples, auto-corregir
npm run lint:css:fix

# 4. Revisar cambios
git diff

# 5. Commit
git add .
git commit -m "feat: actualizar estilos"
```

### En Pull Requests

1. El workflow de GitHub Actions ejecuta autom√°ticamente `npm run lint:css`
2. **Por ahora NO falla** el PR aunque haya warnings
3. Se a√±ade un comentario si hay problemas
4. **Recomendado:** Corregir warnings antes de mergear

## üìä Estado de Migraci√≥n

### Archivos Prioritarios (Ya Migrados)

- ‚úÖ `src/styles/settings/_tokens.less`
- ‚úÖ `src/styles/components/_header.less`
- ‚úÖ `src/styles/components/_footer.less`
- ‚úÖ `src/styles/layouts/news-post-layout.less`
- ‚úÖ `src/styles/layouts/bando-post-layout.less`

### Pendientes de Revisar

- ‚è≥ `src/styles/pages/index.less`
- ‚è≥ `src/styles/pages/contacto.less`
- ‚è≥ `src/styles/components/_cs-base.less`
- ‚è≥ `src/styles/components/cta.less`
- ‚è≥ `src/styles/components/faq.less`

## üéØ Roadmap

### Fase 1: Warming Up (ACTUAL)

- [x] Configurar Stylelint con `defaultSeverity: "warning"`
- [x] A√±adir workflow CI no-bloqueante
- [x] Documentar reglas principales
- [ ] Limpiar warnings en archivos prioritarios
- [ ] Formar al equipo en convenciones

### Fase 2: Enforcement (PR√ìXIMO)

- [ ] Cambiar a `defaultSeverity: "error"`
- [ ] Modificar CI para que falle en errores
- [ ] A√±adir pre-commit hook con Husky
- [ ] Migrar todos los archivos pendientes

### Fase 3: Optimizaci√≥n (FUTURO)

- [ ] A√±adir reglas custom espec√≠ficas del proyecto
- [ ] Configurar property-order espec√≠fico
- [ ] Integrar con editor (VS Code settings)

## üõ†Ô∏è Integraci√≥n con VS Code

Para tener feedback en tiempo real, instala la extensi√≥n:

**Stylelint** (`stylelint.vscode-stylelint`)

Configuraci√≥n recomendada (`.vscode/settings.json`):

```json
{
  "stylelint.validate": ["css", "less"],
  "editor.codeActionsOnSave": {
    "source.fixAll.stylelint": true
  }
}
```

## üÜò Troubleshooting

### "Unknown rule" o "Cannot find module"

```bash
# Reinstalar dependencias
rm -rf node_modules package-lock.json
npm install
```

### "Parsing error" en archivos LESS

Verifica que `.stylelintrc.json` tenga:

```json
{
  "customSyntax": "postcss-less"
}
```

### Demasiados warnings en archivo legacy

Opci√≥n 1: Corregir gradualmente
Opci√≥n 2: A√±adir comentario de desactivaci√≥n temporal:

```less
/* stylelint-disable */
.legacy-code {
  // c√≥digo antiguo
}
/* stylelint-enable */
```

## üìö Referencias

- [Stylelint Documentation](https://stylelint.io/)
- [LESS Syntax](https://lesscss.org/)
- [BEM Methodology](https://getbem.com/)
- [ITCSS Architecture](https://www.xfive.co/blog/itcss-scalable-maintainable-css-architecture/)

---

**√öltima actualizaci√≥n:** 31 de octubre de 2025
