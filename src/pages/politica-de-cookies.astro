---
import Landing from '../components/Landing.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import client from '../data/client.json';
import { getImage } from 'astro:assets';
import vistaAerea from '../../public/assets/images/vista_aerea.jpg';

const optimizedImage = await getImage({ src: vistaAerea });

const pageTitle = 'Pol√≠tica de Cookies';
const description =
  'Informaci√≥n detallada sobre el uso de cookies en el sitio web del Ayuntamiento de Belmontejo y c√≥mo gestionar sus preferencias.';
---

<BaseLayout title={pageTitle} description={description}>
  <Landing title="üç™ Pol√≠tica de Cookies" image={optimizedImage}>
    <p class="subtitle">
      Informaci√≥n sobre el uso de cookies en el sitio web del {client.name}
      <br />
      <strong>√öltima actualizaci√≥n:</strong> 25 de octubre de 2025
    </p>
  </Landing>
  <section class="cookie-policy">
    <div class="container">
      <div class="cookie-policy-content">
        <section class="policy-section">
          <h2>¬øQu√© son las cookies?</h2>
          <p>
            Las cookies son peque√±os archivos de texto que se almacenan en su
            dispositivo cuando visita un sitio web. Estas cookies permiten que
            el sitio web reconozca su dispositivo y almacene informaci√≥n sobre
            sus preferencias o acciones anteriores.
          </p>
        </section>

        <section class="policy-section">
          <h2>¬øC√≥mo utilizamos las cookies?</h2>
          <p>
            En el sitio web del {client.name} utilizamos cookies para los siguientes
            prop√≥sitos:
          </p>
          <ul>
            <li>Recordar sus preferencias de cookies</li>
            <li>Analizar el tr√°fico y uso del sitio web</li>
            <li>Mejorar la experiencia de navegaci√≥n</li>
            <li>Cumplir con obligaciones legales y normativas</li>
          </ul>
        </section>

        <section class="policy-section">
          <h2>Tipos de cookies que utilizamos</h2>

          <div class="cookie-type">
            <h3>üîß Cookies Necesarias (Siempre activas)</h3>
            <div class="cookie-details">
              <p>
                <strong>Finalidad:</strong> Esenciales para el funcionamiento b√°sico
                del sitio web.
              </p>
              <p><strong>Duraci√≥n:</strong> Sesi√≥n o hasta 1 a√±o</p>
              <p>
                <strong>Datos almacenados:</strong> Preferencias de cookies, configuraci√≥n
                del sitio
              </p>
              <div class="cookie-list">
                <h4>Cookies espec√≠ficas:</h4>
                <ul>
                  <li>
                    <code>cookie-consent</code> - Almacena si ha aceptado o rechazado
                    cookies
                  </li>
                  <li>
                    <code>analytics-consent</code> - Almacena su preferencia sobre
                    cookies anal√≠ticas
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="cookie-type">
            <h3>üìä Cookies Anal√≠ticas (Opcionales)</h3>
            <div class="cookie-details">
              <p>
                <strong>Finalidad:</strong> Nos ayudan a entender c√≥mo los visitantes
                utilizan nuestro sitio web.
              </p>
              <p><strong>Proveedor:</strong> Google Analytics</p>
              <p><strong>Duraci√≥n:</strong> Hasta 2 a√±os</p>
              <p>
                <strong>Datos almacenados:</strong> Informaci√≥n an√≥nima sobre visitas,
                p√°ginas vistas, tiempo de permanencia
              </p>
              <div class="cookie-list">
                <h4>Cookies de Google Analytics:</h4>
                <ul>
                  <li><code>_ga</code> - Distingue usuarios √∫nicos (2 a√±os)</li>
                  <li>
                    <code>_ga_*</code> - Mantiene el estado de la sesi√≥n (2 a√±os)
                  </li>
                  <li>
                    <code>_gid</code> - Distingue usuarios √∫nicos (24 horas)
                  </li>
                </ul>
              </div>
              <p class="privacy-note">
                <strong>Nota de privacidad:</strong> Todas las cookies anal√≠ticas
                tienen la anonimizaci√≥n de IP activada para proteger su privacidad.
              </p>
            </div>
          </div>
        </section>

        <section class="policy-section">
          <h2>Sus derechos y opciones</h2>
          <p>
            Usted tiene control total sobre las cookies en nuestro sitio web:
          </p>

          <div class="rights-grid">
            <div class="right-item">
              <h3>‚úÖ Aceptar o Rechazar</h3>
              <p>
                Puede aceptar o rechazar cookies no esenciales en cualquier
                momento.
              </p>
            </div>

            <div class="right-item">
              <h3>‚öôÔ∏è Configurar Preferencias</h3>
              <p>
                Puede elegir qu√© tipos de cookies permitir de forma granular.
              </p>
            </div>

            <div class="right-item">
              <h3>üîÑ Cambiar Preferencias</h3>
              <p>Puede modificar sus preferencias en cualquier momento.</p>
            </div>

            <div class="right-item">
              <h3>üóëÔ∏è Eliminar Cookies</h3>
              <p>Puede eliminar las cookies almacenadas desde su navegador.</p>
            </div>
          </div>

          <div class="manage-cookies">
            <h3>Gestionar sus preferencias de cookies</h3>
            <p>
              Haga clic en el bot√≥n siguiente para abrir el panel de
              configuraci√≥n de cookies:
            </p>
            <button id="open-cookie-settings" class="btn-primary">
              Configurar Cookies
            </button>
          </div>
        </section>

        <section class="policy-section">
          <h2>C√≥mo eliminar cookies desde su navegador</h2>
          <p>
            Tambi√©n puede gestionar o eliminar cookies directamente desde la
            configuraci√≥n de su navegador. Aqu√≠ le explicamos c√≥mo hacerlo en
            los navegadores m√°s comunes:
          </p>

          <div class="browser-instructions">
            <details>
              <summary><strong>Google Chrome</strong></summary>
              <ol>
                <li>
                  Haga clic en los tres puntos (‚ãÆ) en la esquina superior
                  derecha
                </li>
                <li>
                  Seleccione "Configuraci√≥n" &gt; "Privacidad y seguridad" &gt;
                  "Cookies y otros datos del sitio"
                </li>
                <li>Haga clic en "Ver todas las cookies y datos del sitio"</li>
                <li>Busque nuestro sitio web y elimine las cookies</li>
              </ol>
            </details>

            <details>
              <summary><strong>Mozilla Firefox</strong></summary>
              <ol>
                <li>
                  Haga clic en las tres l√≠neas (‚â°) en la esquina superior
                  derecha
                </li>
                <li>
                  Seleccione "Configuraci√≥n" &gt; "Privacidad y seguridad"
                </li>
                <li>
                  En "Cookies y datos del sitio", haga clic en "Gestionar datos"
                </li>
                <li>Busque nuestro sitio web y elimine las cookies</li>
              </ol>
            </details>

            <details>
              <summary><strong>Safari</strong></summary>
              <ol>
                <li>Vaya a "Safari" &gt; "Preferencias" &gt; "Privacidad"</li>
                <li>Haga clic en "Gestionar datos del sitio web"</li>
                <li>Busque nuestro sitio web y elimine las cookies</li>
              </ol>
            </details>
          </div>
        </section>

        <section class="policy-section">
          <h2>Base legal y cumplimiento</h2>
          <p>El uso de cookies en nuestro sitio web se basa en:</p>
          <ul>
            <li>
              <strong>Consentimiento:</strong> Para cookies anal√≠ticas (Art. 6.1.a
              RGPD)
            </li>
            <li>
              <strong>Inter√©s leg√≠timo:</strong> Para cookies t√©cnicas necesarias
              (Art. 6.1.f RGPD)
            </li>
            <li>
              <strong>Cumplimiento legal:</strong> Seg√∫n la Ley 34/2002 de Servicios
              de la Sociedad de la Informaci√≥n
            </li>
          </ul>
        </section>

        <section class="policy-section">
          <h2>Contacto</h2>
          <p>
            Si tiene alguna pregunta sobre nuestra pol√≠tica de cookies o desea
            ejercer sus derechos, puede contactarnos:
          </p>
          <div class="contact-info">
            <p>
              <strong>üìß Email:</strong>
              <a href="mailto:{client.email}">{client.email}</a>
            </p>
            <p>
              <strong>üìû Tel√©fono:</strong>
              <a href="tel:{client.phoneForTel}">{client.phoneFormatted}</a>
            </p>
            <p>
              <strong>üìç Direcci√≥n:</strong>
              {client.address.lineOne}, {client.address.lineTwo}, {
                client.address.city
              }
              {client.address.zip}
            </p>
          </div>
        </section>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Open cookie settings from the policy page
  document.addEventListener('DOMContentLoaded', function () {
    const openSettingsBtn = document.getElementById('open-cookie-settings');
    if (openSettingsBtn) {
      openSettingsBtn.addEventListener('click', function () {
        // Show the cookie settings modal if it exists
        const modal = document.getElementById('cookie-settings-modal');
        if (modal) {
          modal.style.display = 'flex';
          // Set current preferences
          const analyticsConsent =
            localStorage.getItem('analytics-consent') === 'true';
          const analyticsCheckbox = document.getElementById(
            'analytics-cookies'
          ) as HTMLInputElement;
          if (analyticsCheckbox) {
            analyticsCheckbox.checked = analyticsConsent;
          }
        }
      });
    }
  });
</script>

<style lang="less">
  @import '../styles/pages/politica-de-cookies.less';
</style>
