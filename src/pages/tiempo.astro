---
import BaseLayout from '@layouts/BaseLayout.astro';
import Landing from '@components/sections/Landing.astro';
import contactInfo, { getPrimaryOffice } from '@js/contact';

// Optimize our landing image and pass it as props to the BaseLayout (for preloading) and Landing (for rendering)
import landingImage from '@assets/images/vista-aerea-2.jpg';
import { getImage } from 'astro:assets';
const optimizedImage = await getImage({ src: landingImage, format: 'avif' });

const pageTitle = `El tiempo en Belmontejo - ${contactInfo.entity.name}`;
const pageDescription =
  'Consulta el tiempo actual y la previsión de 7 días en Belmontejo, Cuenca. Información meteorológica actualizada para vecinos y visitantes.';
const weatherCoordinates = getPrimaryOffice()?.coordinates;
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  preloadedImage={optimizedImage}
>
  <!-- ============================================ -->
  <!--                    LANDING                   -->
  <!-- ============================================ -->

  <Landing title="El tiempo en Belmontejo" image={optimizedImage}>
    <p>
      Consulta el estado actual del tiempo y la previsión para los próximos 7
      días en Belmontejo.
    </p>
  </Landing>

  <!-- ============================================ -->
  <!--                 Weather Forecast             -->
  <!-- ============================================ -->

  <section id="weather-page">
    <div class="cs-container">
      {
        weatherCoordinates ? (
          <pm-weather
            variant="full"
            locale="es-ES"
            latitude={weatherCoordinates.latitude}
            longitude={weatherCoordinates.longitude}
          />
        ) : null
      }
    </div>
  </section>
</BaseLayout>

<style lang="less">
  @import '../styles/pages/tiempo.less';
</style>
