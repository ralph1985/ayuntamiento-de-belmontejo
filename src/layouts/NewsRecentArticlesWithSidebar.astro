---
/**
 * * This custom layout displays noticias posts and a sidebar
 **/
import FeaturedContent from "@components/FeaturedContent.astro";
import { formatDate } from "@js/utils";
import { Picture } from "astro:assets";

const { posts } = Astro.props;
---

<section class="news-container">
  <section class="main-content">
    {posts.length === 0 && <h1>No Recent Posts</h1>}
    {
      posts.length >= 1 &&
        posts.map((post) => (
          <article class="recent-articles">
            <Picture
              pictureAttributes={{
                class: "news-mainImage",
              }}
              src={post.data.image}
              quality={"mid"}
              formats={["avif", "webp", "jpg"]}
              alt={post.data.imageAlt}
              loading="lazy"
              decoding="async"
              aria-hidden="true"
            />

            <div class="news-header">
              <div class="news-authorGroup">
                <picture class="news-author-img">
                  <img
                    src="/assets/svgs/profile.svg"
                    alt="house"
                    width="32"
                    height="32"
                    decoding="async"
                  />
                </picture>
                <span class="news-author">{post.data.author}</span>
                <span
                  aria-hidden="true"
                  class="news-dot"
                />
                <span class="news-date">{formatDate(post.data.date)}</span>
              </div>
              <h2 class="news-h1">{post.data.title}</h2>
              <p class="news-desc">{post.data.description}</p>
              <a
                href={post.id}
                class="news-link"
              >
                Continuar leyendo
              </a>
            </div>
          </article>
        ))
    }
  </section>
  <aside class="news-sidebar">
    <div class="news-sidebar_widget-wrapper">
      <FeaturedContent
        type="noticias"
        limit={3}
      />
    </div>
  </aside>
</section>

<style lang="less">
  @import "../styles/layouts/news-recent-articles-with-sidebar.less";
</style>
