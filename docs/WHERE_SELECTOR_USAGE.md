# Uso de `:where()` para Reducci√≥n de Especificidad

## üìå Prop√≥sito

El pseudo-selector `:where()` se utiliza para **reducir la especificidad** de selectores CSS complejos, facilitando su override desde utilidades o componentes sin necesidad de incrementar artificialmente la especificidad.

## üéØ Filosof√≠a

- **Problema**: Selectores con ID + clases anidadas (ej: `#sbs .cs-title`) tienen especificidad muy alta (1,0,1)
- **Soluci√≥n**: Envolver las clases en `:where()` ‚Üí `#sbs :where(.cs-title)` reduce especificidad a (1,0,0)
- **Beneficio**: Facilita overrides desde componentes o utilidades sin usar `!important`

## üìÇ Archivos Modificados

### 1. `src/styles/pages/index.less`

**Secci√≥n**: Dark mode para `#sbs` (Side by Side)

**Antes** (especificidad alta):

```less
:root[data-theme='dark'] {
  #sbs {
    .cs-left {
      &:before,
      &:after {
        background: var(--accent);
      }
    }

    .cs-title,
    .cs-text,
    .cs-h3,
    .cs-flex-p,
    .cs-name {
      color: var(--bodyTextColorWhite);
    }
    // ... m√°s selectores
  }
}
```

**Despu√©s** (especificidad reducida):

```less
:root[data-theme='dark'] {
  #sbs :where(.cs-left) {
    &:before,
    &:after {
      background: var(--accent);
    }
  }

  #sbs :where(.cs-title),
  #sbs :where(.cs-text),
  #sbs :where(.cs-h3),
  #sbs :where(.cs-flex-p),
  #sbs :where(.cs-name) {
    color: var(--bodyTextColorWhite);
  }
  // ... m√°s selectores
}
```

**Selectores afectados** (8 total):

- `.cs-left`
- `.cs-picture2`
- `.cs-topper`
- `.cs-title`
- `.cs-text`
- `.cs-h3`
- `.cs-flex-p`
- `.cs-name`
- `.cs-flex-group`
- `.cs-job`
- `.cs-quote-icon`

**Raz√≥n**: Estos selectores combinan un ID con m√∫ltiples clases BEM, generando especificidad 1,0,2 o superior. Al usar `:where()`, la especificidad se reduce a 1,0,0 (solo el ID cuenta), permitiendo que utilidades o componentes puedan override f√°cilmente.

---

### 2. `src/styles/pages/contacto.less`

**Secci√≥n**: Dark mode para `#cs-contact`

**Antes**:

```less
:root[data-theme='dark'] {
  #cs-contact {
    .cs-text,
    .cs-title {
      color: var(--bodyTextColorWhite);
    }

    .cs-topper {
      color: var(--primaryLight);
    }

    #cs-form {
      label,
      input,
      textarea {
        color: var(--bodyTextColorWhite);
      }
    }

    .cs-bg-picture {
      background-color: #000;
    }
  }
}
```

**Despu√©s**:

```less
:root[data-theme='dark'] {
  #cs-contact :where(.cs-text),
  #cs-contact :where(.cs-title) {
    color: var(--bodyTextColorWhite);
  }

  #cs-contact :where(.cs-topper) {
    color: var(--primaryLight);
  }

  #cs-contact :where(#cs-form) {
    label,
    input,
    textarea {
      color: var(--bodyTextColorWhite);
    }
  }

  #cs-contact :where(.cs-bg-picture) {
    background-color: #000;
  }
}
```

**Selectores afectados** (4 total):

- `.cs-text`
- `.cs-title`
- `.cs-topper`
- `#cs-form` (ID dentro de ID - caso especial)
- `.cs-bg-picture`

**Raz√≥n**: Formulario de contacto con selector ID anidado (`#cs-contact #cs-form`) que genera especificidad 2,0,0. Al usar `:where(#cs-form)`, reducimos a 1,0,0 del padre, facilitando overrides.

---

## üîç Casos de Uso Futuros

### Cu√°ndo aplicar `:where()`:

‚úÖ **S√ç aplicar**:

- Selectores con ID + m√∫ltiples clases anidadas
- Bloques de dark mode con alta especificidad
- Selectores en `@layer legacy` que necesitan ser flexibles
- Casos donde se prev√©n overrides frecuentes desde utilidades

‚ùå **NO aplicar**:

- Utilidades (`.u-*`) - ya tienen baja especificidad por dise√±o
- Componentes BEM simples (`.c-button`) - no hay problema de especificidad
- Selectores de una sola clase
- Casos donde queremos IMPEDIR overrides (estilos cr√≠ticos)

### Patr√≥n recomendado:

```less
/* Antes (especificidad 1,0,2) */
#section {
  .element {
    .child {
      color: red;
    }
  }
}

/* Despu√©s (especificidad 1,0,0) */
#section :where(.element .child) {
  color: red;
}

/* O mejor a√∫n (separar en utilidades si es posible) */
#section .element .child {
  /* usar .u-text-primary en HTML */
}
```

---

## üìä Impacto en Especificidad

| Selector Original       | Especificidad | Con `:where()`                  | Especificidad | Reducci√≥n |
| ----------------------- | ------------- | ------------------------------- | ------------- | --------- |
| `#sbs .cs-title`        | 1,0,1         | `#sbs :where(.cs-title)`        | 1,0,0         | -1 clase  |
| `#sbs .cs-left::before` | 1,0,2         | `#sbs :where(.cs-left)::before` | 1,0,1         | -1 clase  |
| `#cs-contact #cs-form`  | 2,0,0         | `#cs-contact :where(#cs-form)`  | 1,0,0         | -1 ID     |

---

## üß™ Verificaci√≥n

Para verificar que `:where()` funciona correctamente:

1. Inspeccionar en DevTools la especificidad calculada
2. Intentar override con utilidad `.u-text-primary` ‚Üí deber√≠a funcionar
3. Verificar que estilos de dark mode siguen aplic√°ndose correctamente
4. Confirmar que no hay regresiones visuales

---

## üìö Referencias

- [MDN: :where()](https://developer.mozilla.org/en-US/docs/Web/CSS/:where)
- [CSS Specificity Calculator](https://specificity.keegan.st/)
- [ITCSS Architecture](https://www.xfive.co/blog/itcss-scalable-maintainable-css-architecture/)
