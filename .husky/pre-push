set -e

echo "Running lint, format, and e2e checks..."

if ! npm run lint; then
  echo "❌ Linting failed. Please fix the issues before pushing."
  exit 1
fi

if ! npm run format; then
  echo "❌ Code formatting check failed. Please run 'npm run format:write' to fix formatting issues."
  exit 1
fi

if ! npm run test:unit; then
  echo "❌ Unit tests failed. Please fix the issues before pushing."
  exit 1
fi

if ! npm run test:e2e:navigation; then
  echo "❌ Navigation tests failed. Please address the reported issues before pushing."
  exit 1
fi

if ! npm run test:e2e:visual; then
  echo "❌ Visual regression tests failed. Please address the reported issues before pushing."
  exit 1
fi

echo "✅ All checks passed!"
