# Gu√≠a de Uso - Mixins de Breakpoints

## üìã √çndice

- [Introducci√≥n](#introducci√≥n)
- [Breakpoints Disponibles](#breakpoints-disponibles)
- [Mixins Principales](#mixins-principales)
- [Mixins de Utilidad](#mixins-de-utilidad)
- [Shortcuts Sem√°nticos](#shortcuts-sem√°nticos)
- [Ejemplos Pr√°cticos](#ejemplos-pr√°cticos)
- [Migraci√≥n desde @media](#migraci√≥n-desde-media)
- [Patrones Comunes](#patrones-comunes)
- [Reglas y Mejores Pr√°cticas](#reglas-y-mejores-pr√°cticas)

---

## üéØ Introducci√≥n

Este sistema de mixins centraliza y estandariza el uso de breakpoints en el proyecto, eliminando valores hard-coded y mejorando la consistencia.

### Ubicaci√≥n

```
src/styles/tools/_breakpoints.less
```

### Importaci√≥n

```less
// El archivo ya est√° importado globalmente en tools/index.less
// Solo necesitas importarlo si trabajas en un archivo aislado:
@import '../tools/_breakpoints.less';
```

---

## üì± Breakpoints Disponibles

Estos breakpoints est√°n definidos en `settings/_tokens.less`:

| Variable  | Valor | P√≠xeles | Dispositivo    |
| --------- | ----- | ------- | -------------- |
| `@bp-xs`  | 0em   | 0px     | Mobile (base)  |
| `@bp-sm`  | 30em  | 480px   | Mobile grande  |
| `@bp-md`  | 48em  | 768px   | Tablet         |
| `@bp-lg`  | 64em  | 1024px  | Desktop        |
| `@bp-xl`  | 80em  | 1280px  | Desktop grande |
| `@bp-2xl` | 96em  | 1536px  | Desktop XL     |

### ‚ö†Ô∏è IMPORTANTE

**NO crear nuevos breakpoints hard-coded.**  
Usar SIEMPRE estos tokens para mantener consistencia en todo el proyecto.

---

## üîß Mixins Principales

### `.mq-up(@breakpoint)`

Media query para pantallas **mayores o iguales** al breakpoint (mobile-first).

```less
.component {
  // Mobile styles (base)
  padding: 1rem;

  .mq-up(@bp-md); {
    // Tablet y superior (‚â• 768px)
    padding: 2rem;
  }
}
```

**Genera:**

```css
@media (min-width: 48em) {
  .component {
    padding: 2rem;
  }
}
```

---

### `.mq-down(@breakpoint)`

Media query para pantallas **menores** al breakpoint (desktop-first).

**NOTA:** Se resta autom√°ticamente 0.0625em (1px) para evitar overlap.

```less
.component {
  display: flex;

  .mq-down(@bp-md); {
    // Solo mobile (< 768px)
    display: block;
  }
}
```

**Genera:**

```css
@media (max-width: 47.9375em) {
  /* 768px - 1px */
  .component {
    display: block;
  }
}
```

---

### `.mq-between(@min, @max)`

Media query para pantallas **entre** dos breakpoints.

```less
.component {
  .mq-between(@bp-md, @bp-lg); {
    // Solo tablet (768px - 1023px)
    font-size: 1.2rem;
  }
}
```

**Genera:**

```css
@media (min-width: 48em) and (max-width: 63.9375em) {
  .component {
    font-size: 1.2rem;
  }
}
```

---

### `.mq-only(@breakpoint)`

Media query para **UN SOLO** rango de breakpoint.

```less
.component {
  .mq-only(@bp-md); {
    // Solo tablet (768px - 1023px)
    display: grid;
  }
}
```

**Equivalencias:**

- `.mq-only(@bp-xs)` ‚Üí `< 480px`
- `.mq-only(@bp-sm)` ‚Üí `480px - 767px`
- `.mq-only(@bp-md)` ‚Üí `768px - 1023px`
- `.mq-only(@bp-lg)` ‚Üí `1024px - 1279px`
- `.mq-only(@bp-xl)` ‚Üí `1280px - 1535px`
- `.mq-only(@bp-2xl)` ‚Üí `‚â• 1536px`

---

## üõ†Ô∏è Mixins de Utilidad

### `.mq-landscape()` / `.mq-portrait()`

Media queries para orientaci√≥n de pantalla.

```less
.video {
  .mq-landscape(); {
    height: 100vh;
  }

  .mq-portrait(); {
    width: 100vw;
  }
}
```

---

### `.mq-retina()`

Media query para pantallas de alta densidad (Retina, 2x).

```less
.logo {
  background-image: url('logo.png');

  .mq-retina(); {
    background-image: url('logo@2x.png');
  }
}
```

---

### `.mq-print()`

Media query para impresi√≥n.

```less
.navigation {
  .mq-print(); {
    display: none;
  }
}
```

---

### `.mq-dark-mode()`

Media query para preferencia del sistema de modo oscuro.

**NOTA:** Esto es **adicional** al toggle manual con `body.dark-mode`.

```less
.component {
  .mq-dark-mode(); {
    background: #000;
  }
}
```

---

### `.mq-reduced-motion()`

Media query para accesibilidad - usuarios que prefieren movimiento reducido.

```less
.animation {
  transition: all 0.3s;

  .mq-reduced-motion(); {
    transition: none;  // Respeta preferencias del usuario
  }
}
```

---

## ‚ö° Shortcuts Sem√°nticos

Atajos legibles para casos comunes:

### `.mq-mobile()`

Pantallas m√≥viles (< tablet). Equivalente a `.mq-down(@bp-md)`.

```less
.nav {
  .mq-mobile(); {
    position: fixed;
    width: 100%;
  }
}
```

---

### `.mq-tablet()`

Solo tablet (768px - 1023px). Equivalente a `.mq-only(@bp-md)`.

```less
.sidebar {
  .mq-tablet(); {
    width: 30%;
  }
}
```

---

### `.mq-tablet-up()`

Tablet y superior (‚â• 768px). Equivalente a `.mq-up(@bp-md)`.

```less
.grid {
  .mq-tablet-up(); {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
  }
}
```

---

### `.mq-desktop()`

Desktop y superior (‚â• 1024px). Equivalente a `.mq-up(@bp-lg)`.

```less
.content {
  .mq-desktop(); {
    max-width: 1200px;
  }
}
```

---

### `.mq-desktop-only()`

Solo desktop (1024px - 1279px). Equivalente a `.mq-only(@bp-lg)`.

```less
.sidebar {
  .mq-desktop-only(); {
    width: 300px;
  }
}
```

---

## üí° Ejemplos Pr√°cticos

### Ejemplo 1: Mobile-first Responsive Component

```less
.card {
  // Base (mobile)
  padding: var(--space-md, @space-md);
  font-size: var(--font-size-sm, @font-size-sm);

  // Tablet y superior
  .mq-up(@bp-md); {
    padding: var(--space-lg, @space-lg);
    font-size: var(--font-size-md, @font-size-md);
  }

  // Desktop y superior
  .mq-up(@bp-lg); {
    padding: var(--space-xl, @space-xl);
    font-size: var(--font-size-lg, @font-size-lg);
  }
}
```

---

### Ejemplo 2: Grid Responsivo

```less
.grid {
  display: grid;
  gap: var(--space-md, @space-md);
  grid-template-columns: 1fr;

  .mq-up(@bp-sm); {
    grid-template-columns: repeat(2, 1fr);
  }

  .mq-up(@bp-md); {
    grid-template-columns: repeat(3, 1fr);
  }

  .mq-up(@bp-lg); {
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-lg, @space-lg);
  }
}
```

---

### Ejemplo 3: Navegaci√≥n Adaptativa

```less
.navigation {
  // Mobile only
  .mq-mobile(); {
    position: fixed;
    top: 0;
    width: 100%;
    height: 100vh;
    transform: translateX(-100%);

    &.active {
      transform: translateX(0);
    }
  }

  // Tablet y superior
  .mq-tablet-up(); {
    position: relative;
    transform: none;
    height: auto;
  }

  // Desktop
  .mq-desktop(); {
    display: flex;
    justify-content: space-between;
  }
}
```

---

### Ejemplo 4: Accesibilidad

```less
.animated-button {
  transition:
    transform var(--transition-base, @transition-base),
    background var(--transition-base, @transition-base);

  &:hover {
    transform: scale(1.05);
    background: var(--color-primary-light, @color-primary-light);
  }

  // Respetar preferencias de usuario
  .mq-reduced-motion(); {
    transition: none;

    &:hover {
      transform: none;
    }
  }
}
```

---

## üîÑ Migraci√≥n desde @media

### Tabla de Conversi√≥n

| Media Query Original                                  | Mixin Equivalente                                        |
| ----------------------------------------------------- | -------------------------------------------------------- |
| `@media (min-width: 0em)`                             | (sin media query - estilos base)                         |
| `@media (min-width: 30em)`                            | `.mq-up(@bp-sm); { }`                                    |
| `@media (min-width: 48em)`                            | `.mq-up(@bp-md); { }` o `.mq-tablet-up(); { }`           |
| `@media (min-width: 64em)`                            | `.mq-up(@bp-lg); { }` o `.mq-desktop(); { }`             |
| `@media (min-width: 80em)`                            | `.mq-up(@bp-xl); { }`                                    |
| `@media (max-width: 47.9375rem)`                      | `.mq-down(@bp-md); { }` o `.mq-mobile(); { }`            |
| `@media (max-width: 63.9375rem)`                      | `.mq-down(@bp-lg); { }`                                  |
| `@media (min-width: 48em) and (max-width: 63.9375em)` | `.mq-between(@bp-md, @bp-lg); { }` o `.mq-tablet(); { }` |

### Proceso de Migraci√≥n Paso a Paso

**1. Identificar media queries en el archivo:**

```bash
grep -n "@media" src/styles/components/header.less
```

**2. Para cada media query, aplicar conversi√≥n:**

```less
// ANTES
@media only screen and (min-width: 64rem) {
  .navigation {
    display: flex;
  }
}

// DESPU√âS
.navigation {
  .mq-up(@bp-lg); {
    display: flex;
  }
}
```

**3. Eliminar @media (min-width: 0em) innecesarios:**

```less
// ANTES
@media only screen and (min-width: 0em) {
  .component {
    padding: 1rem;
  }
}

// DESPU√âS (estilos base sin media query)
.component {
  padding: 1rem;
}
```

**4. Consolidar bloques cuando sea posible:**

```less
// ANTES
@media (min-width: 0em) {
  .card { padding: 1rem; }
}
@media (min-width: 64em) {
  .card { padding: 2rem; }
}

// DESPU√âS (un solo bloque)
.card {
  padding: 1rem;  // Base

  .mq-up(@bp-lg); {
    padding: 2rem;  // Desktop
  }
}
```

**5. Testear visualmente:**

- Verificar en mobile (< 480px)
- Verificar en tablet (768px - 1023px)
- Verificar en desktop (‚â• 1024px)
- Verificar transiciones entre breakpoints

---

## üé® Patrones Comunes

### Patr√≥n 1: Cambio de Flex Direction

```less
.list {
  display: flex;
  flex-direction: column;  // Mobile

  .mq-desktop(); {
    flex-direction: row;  // Desktop
  }
}
```

---

### Patr√≥n 2: Text Alignment

```less
.text {
  text-align: center;  // Mobile

  .mq-tablet-up(); {
    text-align: left;  // Tablet+
  }
}
```

---

### Patr√≥n 3: Spacing Progresivo

```less
.section {
  gap: var(--space-sm, @space-sm);  // Mobile

  .mq-tablet-up(); {
    gap: var(--space-md, @space-md);  // Tablet
  }

  .mq-desktop(); {
    gap: var(--space-lg, @space-lg);  // Desktop
  }
}
```

---

### Patr√≥n 4: Full-width vs Constrained

```less
.container {
  width: 100%;  // Mobile
  padding: var(--space-md, @space-md);

  .mq-desktop(); {
    max-width: 1280px;
    margin: 0 auto;
    padding: var(--space-xl, @space-xl);
  }
}
```

---

### Patr√≥n 5: Hide/Show por Breakpoint

```less
.mobile-menu {
  display: block;  // Visible en mobile

  .mq-desktop(); {
    display: none;  // Oculto en desktop
  }
}

.desktop-nav {
  display: none;  // Oculto en mobile

  .mq-desktop(); {
    display: flex;  // Visible en desktop
  }
}
```

---

## üìè Reglas y Mejores Pr√°cticas

### ‚úÖ S√ç Hacer

1. **Usar mixins en lugar de @media hard-coded**

   ```less
   .mq-up(@bp-md); { }  // ‚úÖ Correcto
   ```

2. **Enfoque mobile-first**

   ```less
   .component {
     padding: 1rem;  // Base (mobile)

     .mq-tablet-up(); {
       padding: 2rem;  // Tablet+
     }
   }
   ```

3. **Consolidar estilos por componente**

   ```less
   .card {
     /* Mobile */
     padding: 1rem;

     /* Tablet */
     .mq-tablet-up(); {
       padding: 2rem;
     }

     /* Desktop */
     .mq-desktop(); {
       padding: 3rem;
     }
   }
   ```

4. **Usar shortcuts sem√°nticos cuando sea m√°s claro**

   ```less
   .mq-mobile(); { }     // ‚úÖ Claro
   .mq-desktop(); { }    // ‚úÖ Claro
   ```

5. **A√±adir accesibilidad**
   ```less
   .mq-reduced-motion(); {
     transition: none;
   }
   ```

---

### ‚ùå NO Hacer

1. **NO crear breakpoints hard-coded**

   ```less
   @media (min-width: 900px) {
   } // ‚ùå Incorrecto
   ```

2. **NO usar valores arbitrarios**

   ```less
   @media (min-width: 65.5rem) {
   } // ‚ùå Incorrecto
   ```

3. **NO duplicar estilos en m√∫ltiples archivos**

   ```less
   // header.less
   @media (min-width: 64em) {
   } // ‚ùå Duplicado

   // footer.less
   @media (min-width: 64em) {
   } // ‚ùå Duplicado

   // Usar: .mq-desktop(); en ambos
   ```

4. **NO anidar mixins innecesariamente**

   ```less
   .mq-desktop(); {
     .mq-tablet(); {  // ‚ùå Conflicto
       // ...
     }
   }
   ```

5. **NO ignorar @media (min-width: 0em)**

   ```less
   @media (min-width: 0em) {
     // ‚ùå Redundante
     .component {
       padding: 1rem;
     }
   }

   // Simplemente:
   .component {
     padding: 1rem; // ‚úÖ Correcto
   }
   ```

---

## üîç Casos Especiales

### Caso 1: Breakpoint No Est√°ndar

Si encuentras un breakpoint que NO coincide con los tokens:

```less
@media (min-width: 50rem) {
} // No es un token est√°ndar
```

**Opciones:**

a) **Si es √∫nico y justificado**, d√©jalo como est√° y documenta:

```less
// NOTA: Breakpoint custom para este componente espec√≠fico
// debido a layout particular con sidebar
@media (min-width: 50rem) {
  // ...
}
```

b) **Si se repite**, considerar a√±adirlo a `_tokens.less`:

```less
// En _tokens.less
@bp-custom: 50rem; // Para layout de sidebar
```

c) **Evaluar si se puede usar un breakpoint est√°ndar cercano**:

```less
.mq-up(@bp-md); { }  // 48em (768px) - cercano a 50rem (800px)
```

---

### Caso 2: Media Queries M√∫ltiples

Si tienes:

```less
@media (min-width: 48rem), (orientation: landscape) {
}
```

**Dividir en bloques separados:**

```less
.mq-up(@bp-md); {
  /* estilos */
}

.mq-landscape(); {
  /* estilos */
}
```

---

### Caso 3: Print Styles con Breakpoints

```less
.component {
  .mq-print(); {
    display: block;

    // Print-specific responsive
    .mq-up(@bp-md); {
      font-size: 12pt;
    }
  }
}
```

---

## üìû Ayuda y Recursos

### Archivos de Referencia

- **C√≥digo fuente de mixins:** `src/styles/tools/_breakpoints.less`
- **Tokens de breakpoints:** `src/styles/settings/_tokens.less`
- **Ejemplos de migraci√≥n:**
  - `src/styles/examples/header-migrated.less`
  - `src/styles/examples/footer-migrated.less`

### Comandos √ötiles

```bash
# Buscar media queries en un archivo
grep -n "@media" src/styles/components/header.less

# Buscar media queries en todo el proyecto
grep -r "@media" src/styles/

# Contar media queries por archivo
grep -c "@media" src/styles/components/*.less
```

### Testing

```bash
# Verificar build
npm run build

# Desarrollo con hot reload
npm run dev
```

---

## ‚úÖ Checklist de Migraci√≥n

Al migrar un archivo a mixins de breakpoints:

- [ ] Importar mixins (si es necesario)
- [ ] Identificar todos los `@media` queries
- [ ] Convertir a mixins apropiados
- [ ] Eliminar `@media (min-width: 0em)` redundante
- [ ] Consolidar estilos por componente
- [ ] Aplicar mobile-first approach
- [ ] A√±adir `.mq-reduced-motion()` donde sea apropiado
- [ ] Testear en todos los breakpoints
- [ ] Verificar que no hay cambios visuales
- [ ] Commit con mensaje descriptivo

---

**Versi√≥n:** 1.0.0  
**√öltima actualizaci√≥n:** 31 de octubre de 2025  
**Autor:** Arquitectura CSS - ITCSS
