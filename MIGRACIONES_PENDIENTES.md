# Migraciones CSS Pendientes

**Fecha:** 31 de octubre de 2025  
**Estado:** Fase 5 parcialmente completada

---

## ‚úÖ Completado en Fase 5

### Header Component

- ‚úÖ Migraci√≥n de clases en `Header.astro` (.cs-_ ‚Üí .c-_)
- ‚úÖ Migraci√≥n de clases en `nav.js` (14 cambios)
- ‚úÖ Eliminaci√≥n de patrones de clase dual en m√∫ltiples archivos (13 instancias)
- ‚úÖ Migraci√≥n de `TableOfContents.astro` y `table-of-contents.less`
- ‚úÖ Migraci√≥n de clases de utilidad (`cs-hide-on-mobile`, `cs-shadow-*`)
- ‚úÖ Migraci√≥n de `NewsRecentArticles.astro` (cs-picture ‚Üí c-picture)

---

## ‚ö†Ô∏è PROBLEMAS IDENTIFICADOS - NO RESUELTOS

### Header Mobile Navigation

**Archivo:** `src/styles/components/_header.less`

**Problema:** Al intentar consolidar `header.less` (745 l√≠neas) con `_header.less` (377 l√≠neas), el men√∫ m√≥vil no funciona correctamente.

**Intentos realizados:**

1. ‚ùå Copiar estilos de dropdown solamente
2. ‚ùå A√±adir imports de breakpoints y tokens
3. ‚ùå Copiar secci√≥n de navegaci√≥n m√≥vil (scaleX/translateX)
4. ‚ùå A√±adir estilos base de .c-navigation dentro del @media m√≥vil
5. ‚ùå A√±adir .c-container dentro del @media m√≥vil

**S√≠ntomas:**

- El men√∫ m√≥vil no se abre correctamente
- Los efectos de animaci√≥n no son los mismos que en el original
- Las transformaciones (scaleX, translateX) no funcionan igual

**Archivos afectados:**

- `src/styles/components/_header.less` (modificado, NO funcional)
- `src/styles/components/header.less` (original, FUNCIONAL pero no se usa)
- `src/components/Header.astro` (importa `_header.less`)

**Recomendaci√≥n para continuar:**

- **REVERTIR** los cambios en `_header.less` a su estado pre-consolidaci√≥n
- **MANTENER** `header.less` como archivo principal
- **CAMBIAR** el import en `Header.astro` de `_header.less` ‚Üí `header.less`
- La consolidaci√≥n requiere un an√°lisis m√°s profundo de la arquitectura CSS m√≥vil-first

---

## üìã Pendiente de Migraci√≥n

### 1. FAQ Component

**Archivo:** `src/components/FAQ.astro`

```javascript
// L√≠nea 123
const faqItems = Array.from(document.querySelectorAll('.cs-faq-item'));
```

**Acci√≥n:** Cambiar `.cs-faq-item` ‚Üí `.c-faq-item` en JavaScript y CSS correspondiente

---

### 2. CSPicture Component (Template)

**Archivo:** `src/components/TemplateComponents/CSPicture.astro`

```less
// L√≠nea 66
@import '../../styles/components/cs-picture.less';
```

**Acci√≥n:**

- Renombrar archivo `cs-picture.less` ‚Üí `c-picture.less` o `_picture.less`
- Actualizar import
- Migrar todas las clases `.cs-*` dentro del archivo

---

### 3. Table of Contents

**Archivo:** `src/styles/components/table-of-contents.less`

```less
// L√≠nea 54
&.cs-toc-current {
```

**Acci√≥n:** Cambiar `.cs-toc-current` ‚Üí `.c-toc-current` (se olvid√≥ esta clase)

---

### 4. Comentarios en HTML (limpieza)

**Archivos afectados:**

- `src/pages/index.astro` (l√≠neas 290, 351, 412)
- `src/pages/proyectos.astro` (l√≠neas 94, 155, 217)
- `src/pages/proyectos/proyecto-1.astro` (l√≠neas 89, 150, 212)
- `src/pages/proyectos/proyecto-2.astro` (l√≠neas 89, 150, 212)

**Comentarios obsoletos:**

```html
<!-- To add more images, copy and paste this row's picture tags here in order from cs-picture-1 to cs-picture-3 -->
```

**Acci√≥n:** Actualizar comentarios `cs-picture-*` ‚Üí `c-picture-*`

---

### 5. Form ID Legacy

**Archivo:** `src/styles/pages/contacto.less`

```less
// L√≠nea 327
.c-contact :where(#cs-form) {
```

**Acci√≥n:** Evaluar si cambiar `#cs-form` ‚Üí `#c-form` (requiere cambio en HTML tambi√©n)

---

### 6. News Layout Floater

**Archivo:** `src/styles/layouts/news-recent-articles.less`

```less
// L√≠nea 261
:where(.cs-floater) {
```

**Acci√≥n:** Cambiar `.cs-floater` ‚Üí `.c-floater` (verificar HTML correspondiente)

---

### 7. Hero Background

**Archivo:** `src/styles/pages/index.less`

```less
// L√≠nea 245
.hero :where(.cs-background) {
```

**Acci√≥n:** Cambiar `.cs-background` ‚Üí `.c-background` (verificar HTML)

---

### 8. Base Component Import

**Archivo:** `src/styles/components/index.less`

```less
// L√≠nea 12
@import './_cs-base.less';
```

**Acci√≥n:**

- Renombrar `_cs-base.less` ‚Üí `_base.less`
- Actualizar import
- Migrar clases internas si las hay

---

### 9. Header Examples (documentaci√≥n)

**Archivo:** `src/styles/examples/header-migrated.less`

Contiene referencias obsoletas a:

- `.cs-open`
- `#cs-navigation`
- `.cs-active`

**Acci√≥n:** Actualizar ejemplos o eliminar archivo si ya no se usa

---

## üîç Archivos con `cs-` para Revisar

Ejecutar b√∫squeda exhaustiva:

```bash
grep -r "cs-" src/ --include="*.astro" --include="*.less" --include="*.js"
```

**√Åreas sospechosas:**

- Componentes de cookies (`analytics-consent` es v√°lido, no migrar)
- Selectores `:where()` que pueden tener `.cs-*`
- Comentarios que mencionan clases antiguas

---

## üéØ Plan de Acci√≥n Recomendado

### Paso 1: Revertir Header (PRIORITARIO)

```bash
# En Header.astro, cambiar:
import '../styles/components/_header.less';
# Por:
import '../styles/components/header.less';
```

### Paso 2: Migrar FAQ

1. Actualizar JavaScript en `FAQ.astro`
2. Actualizar CSS correspondiente
3. Probar funcionalidad

### Paso 3: Migrar CSPicture Template

1. Renombrar archivo CSS
2. Migrar clases internas
3. Actualizar imports
4. Actualizar comentarios en p√°ginas

### Paso 4: Migrar elementos aislados

- Table of Contents (`.cs-toc-current`)
- Form ID si es necesario
- Floater, Background, etc.

### Paso 5: Limpieza final

- Actualizar comentarios obsoletos
- Revisar archivos de ejemplos
- Ejecutar grep final para verificar

---

## üìù Notas Importantes

### No migrar:

- ‚úÖ `analytics-consent` (nombre de localStorage, no clase CSS)
- ‚úÖ Referencias en comentarios que son documentaci√≥n
- ‚úÖ C√≥digo dentro de strings literales no relacionados con CSS

### Precauci√≥n:

- ‚ö†Ô∏è Cualquier consolidaci√≥n de archivos CSS requiere testing exhaustivo
- ‚ö†Ô∏è Las arquitecturas m√≥vil-first son complejas, no asumir que copiar/pegar funciona
- ‚ö†Ô∏è Siempre verificar imports de variables y mixins LESS

### Herramientas:

El script `scripts/migrate-cs-classes.js` puede ayudar pero requiere supervisi√≥n manual para:

- Selectores `:where()`
- IDs (`#cs-*`)
- Referencias en JavaScript
- Comentarios y documentaci√≥n

---

## Estado del Repositorio

**Branch:** `feat/css-improvements`  
**√öltimo commit:** Migraci√≥n Fase 5 parcial (Header con problemas)

**Recomendaci√≥n:** Crear nuevo branch desde `develop` antes de continuar para no perder trabajo actual pero poder empezar limpio.

---

**Documentado por:** GitHub Copilot  
**Revisi√≥n necesaria:** ‚úÖ Antes de continuar
