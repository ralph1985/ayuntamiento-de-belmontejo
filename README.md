# Ayuntamiento de Belmontejo

Este proyecto es el sitio web oficial del Ayuntamiento de Belmontejo, dise√±ado para proporcionar informaci√≥n y servicios a los ciudadanos.

## Caracter√≠sticas

- **Anuncios Oficiales (Bandos):** Muestra los bandos municipales, obtenidos autom√°ticamente a trav√©s de un script.
- **Noticias y Proyectos:** Secciones para mantener a los ciudadanos informados sobre las √∫ltimas noticias y proyectos del ayuntamiento.
- **Informaci√≥n del Pueblo:** Detalles sobre la historia, lugares de inter√©s y otra informaci√≥n relevante sobre Belmontejo.
- **Administraci√≥n de Contenido:** Utiliza Decap CMS para una f√°cil gesti√≥n del contenido del sitio.
- **Dise√±o Adaptable:** Interfaz accesible y f√°cil de usar en diferentes dispositivos.

## Tecnolog√≠as Utilizadas

- **Astro:** Framework de desarrollo para construir sitios web r√°pidos y optimizados.
- **Vercel:** Plataforma para el despliegue y alojamiento del sitio.
- **Decap CMS:** Sistema de gesti√≥n de contenido (CMS) para actualizar el contenido de forma sencilla.
- **Node.js:** Entorno de ejecuci√≥n para los scripts del proyecto.

## Estructura del Proyecto

El proyecto sigue la estructura est√°ndar de Astro:

- **/src/pages/**: Contiene las diferentes p√°ginas del sitio.
- **/src/components/**: Componentes reutilizables de Astro.
- **/src/layouts/**: Plantillas de dise√±o para las p√°ginas.
- **/src/content/**: Almacena el contenido del sitio gestionado por Decap CMS.
- **/src/styles/**: Sistema de estilos con arquitectura ITCSS y tokens de dise√±o.
- **/public/**: Archivos est√°ticos como im√°genes y el panel de administraci√≥n.
- **/scripts/**: Scripts para tareas automatizadas, como la obtenci√≥n de bandos.

### üé® Arquitectura CSS

El proyecto implementa una arquitectura **ITCSS** (Inverted Triangle CSS) con **CSS Cascade Layers** y un sistema completo de **tokens de dise√±o**.

**Documentaci√≥n de estilos:**

- üìò **[TOKENS_README.md](./TOKENS_README.md)** - Gu√≠a r√°pida y referencia de tokens
- üìó **[MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md)** - Gu√≠a detallada de migraci√≥n
- üìï **[ARCHITECTURE_EXPLAINED.md](./ARCHITECTURE_EXPLAINED.md)** - Explicaci√≥n t√©cnica profunda
- üìô **[TOKENS_SUMMARY.md](./TOKENS_SUMMARY.md)** - Resumen ejecutivo

**Caracter√≠sticas:**

- ‚úÖ Sistema de tokens centralizado (colores, tipograf√≠a, espaciado, etc.)
- ‚úÖ Modo oscuro autom√°tico
- ‚úÖ Compatibilidad 100% con CSS existente
- ‚úÖ Variables LESS + CSS Custom Properties
- ‚úÖ Arquitectura escalable y mantenible
- ‚úÖ Mixins de breakpoints para media queries consistentes

### üì± Breakpoints y Media Queries

El proyecto usa **mixins de breakpoints** centralizados para mantener consistencia en media queries.

**Breakpoints disponibles:**

```less
@bp-xs: 0em // 0px - Mobile (base)
  @bp-sm: 30em // 480px - Mobile grande
  @bp-md: 48em // 768px - Tablet
  @bp-lg: 64em // 1024px - Desktop
  @bp-xl: 80em // 1280px - Desktop grande
  @bp-2xl: 96em; // 1536px - Desktop extra grande
```

**Uso de mixins:**

```less
// Mobile-first (min-width)
.component {
  padding: 1rem;

  .mq-up(@bp-md) {
    padding: 2rem; // Tablet y superior
  }
}

// Desktop-first (max-width)
.component {
  .mq-down(@bp-md) {
    display: block; // Solo mobile
  }
}

// Rango espec√≠fico
.component {
  .mq-between(@bp-md, @bp-lg) {
    font-size: 1.2rem; // Solo tablet
  }
}
```

**üìñ Ver documentaci√≥n completa:** [BREAKPOINTS_MIGRATION.md](./BREAKPOINTS_MIGRATION.md)

## Configuraci√≥n y Ejecuci√≥n

### Requisitos

- Node.js (versi√≥n recomendada en `.nvmrc`)
- npm (o un gestor de paquetes similar)

### Pasos

1. **Clonar el repositorio:**

   ```bash
   git clone https://github.com/tu-usuario/ayuntamiento-de-belmontejo.git
   ```

2. **Instalar dependencias:**

   ```bash
   npm install
   ```

3. **Ejecutar el servidor de desarrollo:**

   ```bash
   npm run dev
   ```

4. **Compilar el proyecto:**
   ```bash
   npm run build
   ```

## Scripts Disponibles

- **`npm run dev`:** Inicia el servidor de desarrollo de Astro.
- **`npm run build`:** Compila el sitio para producci√≥n.
- **`npm run preview`:** Vista previa del sitio compilado.
- **`npm run fetch-bandos`:** Script para obtener y actualizar los bandos municipales.
- **`npm run lint`:** Ejecuta ESLint en archivos JavaScript/TypeScript/Astro.
- **`npm run lint:fix`:** Ejecuta ESLint y corrige autom√°ticamente los problemas encontrados.
- **`npm run lint:css`:** Ejecuta Stylelint en archivos CSS/LESS (modo warning).
- **`npm run lint:css:fix`:** Ejecuta Stylelint y corrige autom√°ticamente los problemas de formato.
- **`npm run format`:** Verifica el formato del c√≥digo con Prettier.
- **`npm run format:write`:** Formatea todo el c√≥digo con Prettier.

### üé® Linting CSS/LESS

El proyecto utiliza **Stylelint** para mantener la calidad y consistencia del c√≥digo CSS/LESS:

**Pol√≠tica de Warnings (Actual):**

- ‚ö†Ô∏è **Modo Warning:** Por ahora, Stylelint est√° configurado en modo `"warning"` para no bloquear PRs.
- üìù **Recomendaci√≥n:** Ejecuta `npm run lint:css` antes de cada commit para detectar problemas.
- üîß **Auto-fix:** Usa `npm run lint:css:fix` para corregir autom√°ticamente problemas de formato.

**Reglas principales:**

- M√°ximo 3 niveles de anidaci√≥n LESS
- Nomenclatura BEM ligera para clases (bloque, `__elemento`, `--modificador`)
- Sin nombres de colores (`red`, `blue`), usar hex/rgb/hsl
- Sin selectores por ID
- Orden de propiedades consistente

**Pol√≠tica futura:**

- üéØ Una vez estabilizado el c√≥digo, cambiaremos a `"defaultSeverity": "error"` para bloquear PRs con problemas.
- üöÄ El workflow de CI ya est√° configurado pero en modo permisivo.

**Archivos ignorados:**

- `/dist/**`, `/build/**`, `/.astro/**`, `/public/**`

## Despliegue

El sitio est√° configurado para un despliegue continuo en Vercel. Cada vez que se realiza un `push` a la rama principal, se despliega autom√°ticamente una nueva versi√≥n.

## Panel de Administraci√≥n

El sitio incluye un panel de administraci√≥n de Decap CMS en `/admin`. Para habilitarlo, es necesario configurar la variable de entorno `PUBLIC_ADMIN_MENU` a `true`.

## Variables de Entorno

Es necesario crear un archivo `.env` en la ra√≠z del proyecto con las siguientes variables para el correcto funcionamiento del panel de administraci√≥n:

- `GITHUB_CLIENT_ID`: ID de cliente de la aplicaci√≥n OAuth de GitHub.
- `GITHUB_CLIENT_SECRET`: Secreto de cliente de la aplicaci√≥n OAuth de GitHub.
- `PUBLIC_ADMIN_MENU`: `true` o `false` para mostrar u ocultar el men√∫ de administraci√≥n.
